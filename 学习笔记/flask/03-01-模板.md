# 重定向+url_for+模板语法

### redirect(location,code=302,Response=None)

```python
@app.route('/')
def index():
    return redirect('/')#有两个路径，返回302，浏览器再次向服务器请求目标页面，两次响应。
```

### url_for

```python
@app.route('/',endpoint='index')
def index():
    return ...
@app.route('/test')
def test():
    url=url_for('index')#endpoint的值,不用记路径，直接用endpoint就行。（也叫反向解析，通过名字找到路径，可配合蓝图使用）
    print(url)
    return redirect(url_for('index'))   
```

### response响应：

1. str
2. dict
3. response对象
4. make_response()
5. render_template()
6. render_template() 模板渲染+模板

#  模板

```html
#flask对象config、request、session、g、url_for、get_flashed_messages()可以在模板中使用
视图里使用：return render_template(模板名,name=变量名,age=变量名)
模板里使用：{{name}}--{{age}}
```



## 模板变量 list dict object 和 控制代码

render_template('模板名字'，key=value,key=value)

#### list

```python
def index():
    names=['张三','李四1','王五1']
    return render_template('abc.html',friend=names)
#html模板中使用
{{friend.0}}、{{friend[0]}}

#控制块
<ul>
{% for friend1 in friend %}
    <li>{{friend1}}</li>
{%endfor%}
</ul>
<ul>
{% for friend1 in friend %}
    {% if friend1|length >2 %}
    <li>{{friend1}}</li>
    {%else%}
    <li>{{friend1}}+不是</li>
    {%endif%}
{%endfor%}
</ul>
```

#### dict

```python
def index():
    gifts={'gift1':'大手镯','gift2':'鲜花','gift2':'巧克力'}
    return render_template('abc.html',friend=names,dict1=gifts)
#html模板中使用
{{dict1.gift1}}、{{dict1.get('gift2')}}
```

#### object

```python
class Girl:
    def __init__(self,name,addr):
        self.name=name
        self.gender='女'
        self.addr=addr
        def __str__():
            return self.name
def index():
    girl=Girl('李李','12-9-802')
    return render_template('aa.html',object1=girl)
#html模板中使用
{{object1.name}}、{{object1.addr}}
```



## 控制块

```python 
{%if %}
条件为真
{%else%}
条件为假
{%endif%}

{%for 变量名 in 变量%}
要循环做的事
{%endfor%}
```

3-4 loop变量使用（3-4-时间 为9：55开始）



